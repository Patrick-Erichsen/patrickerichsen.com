---
import type { GetStaticPaths } from 'astro'
import Layout from '@layouts/Layout.astro'
import { getSortedPosts } from '@utils'
import PostList from '@components/PostList.astro'
import Pagination from '@components/Pagination.astro'
import siteConfig from '../../site.config'

export const getStaticPaths = (async ({ paginate }) => {
  const sortedPosts = await getSortedPosts()
  return paginate(sortedPosts, { pageSize: siteConfig.pageSize })
}) satisfies GetStaticPaths

const { page } = Astro.props
---

<Layout title="Writing" description="All posts">
  <PostList posts={page.data} />
  <Pagination
    prevLink={page.url.prev ? page.url.prev : undefined}
    prevText="Newer"
    nextLink={page.url.next ? page.url.next : undefined}
    nextText="Older"
  />
</Layout>
